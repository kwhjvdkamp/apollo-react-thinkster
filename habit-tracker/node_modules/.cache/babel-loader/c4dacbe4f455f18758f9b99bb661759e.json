{"ast":null,"code":"var _jsxFileName = \"C:\\\\HomeProjects\\\\apollo-react-thinkster\\\\habit-tracker\\\\src\\\\AddHabit.js\";\nimport React, { useRef, useState } from \"react\";\nimport { useMutation, gql } from \"@apollo/client\";\nimport { HABITS_QUERY } from \"./App\";\nconst CREATE_HABIT_MUTATION = gql`\n  mutation CREATE_HABIT_MUTATION($input: NewHabitInput) {\n    createHabit(input: $input) {\n      id\n      description\n      points\n      entries {\n        id\n        notes\n        date\n        completed\n      }\n    }\n  }\n`;\n\nfunction AddHabit() {\n  // hooks t\n  const [description, setDescription] = useState(null);\n  const descriptionInput = useRef(null);\n  const [createHabit, {\n    error,\n    loading\n  }] = useMutation(CREATE_HABIT_MUTATION, {\n    refetchQueries: [{\n      query: HABITS_QUERY\n    }]\n  });\n\n  const handleChange = () => {\n    const {\n      value\n    } = descriptionInput.current;\n    setDescription(value);\n  };\n\n  const onEnterPress = e => {\n    if (e.keyCode === 13 && description) {\n      addHabit(e);\n    }\n  };\n\n  const addHabit = e => {\n    e.preventDefault();\n    const input = {\n      description\n    };\n    createHabit({\n      variables: {\n        input\n      }\n    });\n    descriptionInput.current.value = \"\";\n    setDescription(\"\");\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, error && /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 17\n    }\n  }, \"Error! \", error.message), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    placeholder: \"What are you gonna do?\",\n    name: \"description\",\n    ref: descriptionInput,\n    onChange: handleChange,\n    onKeyDown: onEnterPress,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    disabled: !description || loading,\n    onClick: addHabit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }\n  }, \"Add\", loading ? \"ing...\" : \"\"));\n}\n\nexport default AddHabit;","map":{"version":3,"sources":["C:/HomeProjects/apollo-react-thinkster/habit-tracker/src/AddHabit.js"],"names":["React","useRef","useState","useMutation","gql","HABITS_QUERY","CREATE_HABIT_MUTATION","AddHabit","description","setDescription","descriptionInput","createHabit","error","loading","refetchQueries","query","handleChange","value","current","onEnterPress","e","keyCode","addHabit","preventDefault","input","variables","message"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,MAAhB,EAAwBC,QAAxB,QAAwC,OAAxC;AACA,SAASC,WAAT,EAAsBC,GAAtB,QAAiC,gBAAjC;AACA,SAASC,YAAT,QAA6B,OAA7B;AAEA,MAAMC,qBAAqB,GAAGF,GAAI;;;;;;;;;;;;;;CAAlC;;AAgBA,SAASG,QAAT,GAAoB;AAElB;AACA,QAAM,CAACC,WAAD,EAAcC,cAAd,IAAgCP,QAAQ,CAAC,IAAD,CAA9C;AACA,QAAMQ,gBAAgB,GAAGT,MAAM,CAAC,IAAD,CAA/B;AAGA,QAAM,CAACU,WAAD,EAAc;AAAEC,IAAAA,KAAF;AAASC,IAAAA;AAAT,GAAd,IAAoCV,WAAW,CAACG,qBAAD,EAAwB;AAC3EQ,IAAAA,cAAc,EAAE,CAAC;AAAEC,MAAAA,KAAK,EAAEV;AAAT,KAAD;AAD2D,GAAxB,CAArD;;AAIA,QAAMW,YAAY,GAAG,MAAM;AACzB,UAAM;AAAEC,MAAAA;AAAF,QAAYP,gBAAgB,CAACQ,OAAnC;AACAT,IAAAA,cAAc,CAACQ,KAAD,CAAd;AACD,GAHD;;AAKA,QAAME,YAAY,GAAIC,CAAD,IAAO;AAC1B,QAAIA,CAAC,CAACC,OAAF,KAAc,EAAd,IAAoBb,WAAxB,EAAqC;AACnCc,MAAAA,QAAQ,CAACF,CAAD,CAAR;AACD;AACF,GAJD;;AAMA,QAAME,QAAQ,GAAIF,CAAD,IAAO;AACtBA,IAAAA,CAAC,CAACG,cAAF;AACA,UAAMC,KAAK,GAAG;AAAEhB,MAAAA;AAAF,KAAd;AACAG,IAAAA,WAAW,CAAC;AAAEc,MAAAA,SAAS,EAAE;AAAED,QAAAA;AAAF;AAAb,KAAD,CAAX;AACAd,IAAAA,gBAAgB,CAACQ,OAAjB,CAAyBD,KAAzB,GAAiC,EAAjC;AACAR,IAAAA,cAAc,CAAC,EAAD,CAAd;AACD,GAND;;AAQA,sBACE,0CACGG,KAAK,iBAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAAWA,KAAK,CAACc,OAAjB,CADZ,eAEE;AACE,IAAA,IAAI,EAAC,MADP;AAEE,IAAA,WAAW,EAAC,wBAFd;AAGE,IAAA,IAAI,EAAC,aAHP;AAIE,IAAA,GAAG,EAAEhB,gBAJP;AAKE,IAAA,QAAQ,EAAEM,YALZ;AAME,IAAA,SAAS,EAAEG,YANb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,eAUE;AACE,IAAA,IAAI,EAAC,QADP;AAEE,IAAA,QAAQ,EAAE,CAACX,WAAD,IAAgBK,OAF5B;AAGE,IAAA,OAAO,EAAES,QAHX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAKMT,OAAO,GAAG,QAAH,GAAc,EAL3B,CAVF,CADF;AAoBD;;AAED,eAAeN,QAAf","sourcesContent":["import React, { useRef, useState } from \"react\";\r\nimport { useMutation, gql } from \"@apollo/client\";\r\nimport { HABITS_QUERY } from \"./App\";\r\n\r\nconst CREATE_HABIT_MUTATION = gql`\r\n  mutation CREATE_HABIT_MUTATION($input: NewHabitInput) {\r\n    createHabit(input: $input) {\r\n      id\r\n      description\r\n      points\r\n      entries {\r\n        id\r\n        notes\r\n        date\r\n        completed\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nfunction AddHabit() {\r\n\r\n  // hooks t\r\n  const [description, setDescription] = useState(null);\r\n  const descriptionInput = useRef(null);\r\n\r\n\r\n  const [createHabit, { error, loading }] = useMutation(CREATE_HABIT_MUTATION, {\r\n    refetchQueries: [{ query: HABITS_QUERY }],\r\n  });\r\n\r\n  const handleChange = () => {\r\n    const { value } = descriptionInput.current;\r\n    setDescription(value);\r\n  };\r\n\r\n  const onEnterPress = (e) => {\r\n    if (e.keyCode === 13 && description) {\r\n      addHabit(e);\r\n    }\r\n  };\r\n\r\n  const addHabit = (e) => {\r\n    e.preventDefault();\r\n    const input = { description };\r\n    createHabit({ variables: { input } });\r\n    descriptionInput.current.value = \"\";\r\n    setDescription(\"\");\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {error && <p>Error! {error.message}</p>}\r\n      <input\r\n        type=\"text\"\r\n        placeholder=\"What are you gonna do?\"\r\n        name=\"description\"\r\n        ref={descriptionInput}\r\n        onChange={handleChange}\r\n        onKeyDown={onEnterPress}\r\n      />\r\n      <button\r\n        type=\"button\"\r\n        disabled={!description || loading}\r\n        onClick={addHabit}\r\n      >\r\n        Add{loading ? \"ing...\" : \"\"}\r\n      </button>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default AddHabit;\r\n"]},"metadata":{},"sourceType":"module"}